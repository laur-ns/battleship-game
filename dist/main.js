(()=>{"use strict";function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}const t=function(t){var e,n=t,a=function(t){if(Array.isArray(t))return r(t)}(e=Array(n).keys())||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return{squares:a,coordinates:[],length:n,hit:function(r){return"hit"!==a[r]&&(a[r]="hit",!0)},isSunk:function(){return a.reduce((function(r,t){return r&&"hit"===t}),!0)}}},e=function(){for(var r=[],e=[],n=0;n<10;n+=1){r[n]=[];for(var a=0;a<10;a+=1)r[n].push(null)}var o=function(t,e,n,a){switch(n){case"x":if(t+a>r.length)return!1;for(var o=0;o<a;o+=1)if(null!==r[t+o][e])return!1;break;case"y":if(e+a>r.length)return!1;for(var i=0;i<a;i+=1)if(null!==r[t][e+i])return!1}return!0};return{board:r,placeShip:function(n,a,i,c){if(!o(n,a,i,c))return!1;var u=e.push(t(c));if("x"===i)for(var s=n;s<n+c;s+=1)r[s][a]=u,e[u-1].coordinates.push([s,a]);if("y"===i)for(var l=a;l<a+c;l+=1)r[n][l]=u,e[u-1].coordinates.push([n,l]);return!0},ships:e,canPlace:o,checkWin:function(){var r=!0;return e.forEach((function(t){t.squares.forEach((function(t){"hit"!==t&&(r=!1)}))})),r},receiveAttack:function(t,n){if(0===r[t][n])return!1;if(null===r[t][n])return r[t][n]=0,!0;var a,o=e[r[t][n]-1];for(a=0;a<o.coordinates.length&&(o.coordinates[a][0]!==t||o.coordinates[a][1]!==n);a+=1);return e[r[t][n]-1].hit(a)}}},n=function(r){var t=r;return null!=t&&""!==t||(t="Player"),{name:t,attack:function(r,t,e){var n=t,a=e;return void 0!==n&&void 0!==a||(n=Math.floor(10*Math.random()),a=Math.floor(10*Math.random())),r.receiveAttack(n,a)}}};var a=1,o=!1,i=function(r,t){for(var e=r.querySelectorAll(".ships__count > *"),n=t.ships,a=0,o=0;o<5;o+=1)for(var i=0;i<n[o].squares.length;i+=1)"hit"===n[o].squares[i]&&e[a].classList.add("ships__square--hit"),a+=1},c=function(r,t){var e=t.querySelector(".user__grid");e.innerHTML="",r.placeShip(0,0,"x",2),r.placeShip(2,2,"y",3),r.placeShip(4,2,"x",3),r.placeShip(5,6,"y",4),r.placeShip(5,4,"x",5);var n=document.createElement("div");n.classList.add("user__square");for(var a=0;a<100;a+=1){var i=n.cloneNode();i.classList.add(a);var c=Number(a%10),u=Math.floor(a/10);r.board[c][u]>0&&i.classList.add("user__square--ship"),e.append(i)}o=!0};!function(r,t){var u=n(r),s=n(t),l=e(),f=e(),h=document.querySelector("#player1"),d=document.querySelector("#player2");h.querySelector(".user__name span").textContent=u.name,d.querySelector(".user__name span").textContent=s.name,c(l,h),c(f,d);var p=h.querySelectorAll(".user__grid > *"),v=d.querySelectorAll(".user__grid > *");p.forEach((function(r){r.addEventListener("click",(function(){if(o&&2===a){var t=Number(r.classList[1]%10),e=Math.floor(r.classList[1]/10);s.attack(l,t,e)&&(r.classList.add("user__square--hit"),i(h,l),l.checkWin()&&(console.log("{p2.name} has won the game!"),o=!1),a=1)}}))})),v.forEach((function(r){r.addEventListener("click",(function(){if(o&&1===a){var t=Number(r.classList[1]%10),e=Math.floor(r.classList[1]/10);u.attack(f,t,e)&&(r.classList.add("user__square--hit"),a=2,i(d,f),f.checkWin()&&(console.log("".concat(u.name," has won the game!")),o=!1),setTimeout((function(){a=2,function(r){for(var t=Math.floor(100*Math.random());r[t].classList.contains("user__square--hit");)t=Math.floor(100*Math.random());r[t].click()}(p)}),1e3))}}))}))}(prompt("Enter your name"),"Computer")})();